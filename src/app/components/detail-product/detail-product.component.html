
<app-breadcrumb [name] = "product.name"></app-breadcrumb>

<div class="details-product-container" id="details-product-container" fxLayout="row" fxLayoutAlign="center center">
    <div fxFlex="87" fxFlex.sm="98" fxFlex.xs="97">

        <div class="details-product" fxLayout="row wrap " fxLayoutAlign="space-around  start">

            <div fxFlex="75" fxFlex.sm="100" fxFlex.xs="100">
                <div fxLayout="row wrap"  fxLayoutAlign="space-around  start">

                    <div class="product-images" fxFlex="40" fxFlex.sm="50" fxFlex.xs="100" >
                        <swiper 
                            [spaceBetween]="10" [navigation]="true" [thumbs]="{ swiper: thumbsSwiper }"
                            [zoom]="true"
                            class="mySwiper2">
                            <ng-template swiperSlide *ngFor="let img of [1,2,3]">
                                <img src="./../../../assets/img/laptop-{{img}}.png" />
                            </ng-template>
                          
                        </swiper>
                        <swiper (swiper)="thumbsSwiper = $event" [spaceBetween]="10" [slidesPerView]="3"
                            [freeMode]="true" [watchSlidesProgress]="true" class="mySwiper">
                            <ng-template swiperSlide *ngFor="let img of product?.urlImgs">
                                <img src="{{img}}" />
                            </ng-template>
                            
                        </swiper>
                    </div>

                    <div class="info-product" fxFlex="60" fxFlex.sm="50" fxFlex.xs="100" >
                        <h1 class="title-product">
                            {{product.name}}
                        </h1>
                        <div class="review-result" >
                            <i class="material-icons">star</i>
                            <i class="material-icons">star</i>
                            <i class="material-icons">star</i>
                            <i class="material-icons">star</i>
                            <i class="material-icons">star</i>
                            <span class="total-review" id="pos-review">là người đầu tiên đánh giá</span>
                        </div>

                        <div class="product-description">
                            <div class="status">
                                <span class="first_status">Thương hiệu:
                                    <span class="status_name">{{product.brand}}</span>
                                </span>
                                <span class="first_status"> &nbsp;|&nbsp; Tình trạng:
                                    <span class="status_name availabel" *ngIf="product?.amount">
                                        Còn hàng
                                    </span>
                                    <!-- <span class="status_name" *ngIf="product?.amount && product?.amount < 0">
                                        Hết hàng
                                    </span> -->
                                </span>
                            </div>
                            <div class="price">
                                <span class="special-price">
                                    {{product.price - product.price*product.discount/100 }}<sup>đ</sup>

                                </span>
                                <span class="old-price">
                                    {{product.price}}<sup>đ</sup>

                                </span>
                            </div>
                            <div class="description">
                                <ul>
                                    <li *ngFor="let description of product?.description">
                                        <i class="material-icons">check_circle</i>
                                        {{description}}
                                    </li>
                                    <li class="special-description">
                                        <i class="material-icons">check_circle</i>
                                        BẢO HÀNH 2 NĂM TOÀN CẦU
                                    </li>
                                </ul>
                            </div>
                            <div class="quantity">
                                <p class="label">Số Lượng</p>
                                <div class="group-input">
                                    <button (click)="removeItem()">
                                        <i class="material-icons">remove</i>
                                    </button>
                                    <input type="text " class="input" [(ngModel)]="quantity">
                                    <button>
                                        <i class="material-icons" (click)="addItem()">add</i>
                                    </button>
                                </div>
                                <p id="alert-quantity">Sản phẩm không đủ số lượng</p>
                            </div>

                            <div class="button-actions">
                                <button>
                                    <span>MUA NGAY</span>
                                    <span>Giao hàng miễn phí tận nơi</span>
                                </button>
                            </div>

                            <div class="promotion-info">
                                <p>
                                    <i class="material-icons">card_giftcard</i>
                                    Khuyến mãi
                                </p>
                                <ul>
                                    <li *ngFor="let promotion of product?.promotion">{{promotion}}</li>
                                </ul>
                                <p>
                                    <i class="material-icons">card_giftcard</i>
                                    Ưu đãi
                                </p>
                                <ul>
                                    <li><span style="color:#2ecc71;">Miễn phí</span><span> vệ sinh trong thời gian bảo
                                            hành</span></li>
                                    <li><span style="color:#2ecc71;">Miễn phí</span><span><strong> </strong> vận chuyển
                                            toàn quốc</span>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="description-full">
                    <div class="title">Mô tả sản phẩm</div>
                    <div class="content">
                        <div class="product-info">
                            <div id="show-less" *ngIf = "!textFull">
                                <p>
                                    <strong>Laptop Gaming Gigabyte AORUS 17 XE5-73VN534GH </strong>  đáp ứng đủ các tiêu chuẩn của người chơi chuyên nghiệp. Được trang bị GPU GeForce RTX 30 series mới nhất, công nghệ làm mát Windforce Infinity độc quyền, cùng với bộ xử lý Intel Core H thế hệ thứ 12, đảm bảo sự ổn định trong việc cung cấp 100% hiệu suất đầu ra, mang đến cho bạn hiệu ứng hiển thị tốt nhất và chân thực trong các trò chơi.
                                </p>
                                <p>
                                    <img style="max-width:100%; max-height:100%;" src="//bizweb.sapocdn.net/100/329/122/files/screenshot-1648700593.jpg?v=1648700644129" style="width: 100%;">
                                </p>
                            </div>
                            <div *ngIf = "!textFull" class="hidden-less"  ></div>
                            <div  id="show-more"></div>
                            <div id="show-more-btn" >
                                <a (click)="showMore()">
                                    <span *ngIf = "!textFull">Xem đầy đủ</span>
                                    <span *ngIf = "textFull">Thu gọn</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="review" id="review-container">
                    <h3>KHÁCH HÀNG NHẬN XÉT</h3> 
                    <div class="review-summary" fxLayout="row wrap" fxLayoutAlign="space-around start">
                        <div fxFlex="33,3%" fxFlex.sm="100" fxFlex.xs="100">
                            <div class="alert-warning">Chưa có đánh giá, hãy là người đầu tiên</div>
                        </div>
                        <div  fxFlex="33,3%" fxFlex.sm="100" fxFlex.xs="100" class="progress-star">
                            <div class="percent_{{item}}" *ngFor="let item of [5,4,3,2,1]" class="progress-line" >
                                <label>
                                    {{item}}
                                </label>
                                <i class="material-icons">star</i>
                                <mat-progress-bar mode="determinate" value="10"></mat-progress-bar> 0%
                            </div>
                        </div>
                        <div  fxFlex="33,3%" fxFlex.sm="100" fxFlex.xs="100">
                            <div>Chia sẻ nhận xét về sản phẩm</div>
                            <button class="btn btn-sm btn-danger" id="btn-openform" (click)="this.openFormReview =!this.openFormReview;">
                                <span *ngIf="!openFormReview">Viết đánh giá của bạn</span>
                                <span *ngIf="openFormReview">Đóng</span>
                            </button>
                        </div>
                    </div>
                </div>
                <form  class="form-review" [formGroup]="reviewForm" (ngSubmit)="onSubmitReview()" *ngIf="openFormReview" >
                    <h3 class="title">
                        Đánh giá, bình luận về <br><strong>{{product.name}}</strong>
                    </h3>
                    <div class="rate">
                        <label>B1. Chọn đánh giá của bạn</label>
                        <input hidden type="text" class="star" id="number-star" [(ngModel)]="number_star" formControlName="numberStar">
                        <ul class="list-star">
                            <li  *ngFor="let item of star_title">
                                <i class="material-icons" (click)="setReviewStar(item.id)">star</i>
                                <span id="title_{{item.id}}" class="alert-star">{{item.title}}</span>
                            </li>
                        </ul>
                    </div>
                    <div class="detail-review" fxLayout="row wrap" fxLayoutAlign="start start">
                        <div fxFlex="100" fxFlex.sm="100" fxFlex.xs="100">
                            <label for="txt-comment">B2. Nhập đánh giá về sản phẩm(*):</label>
                            <textarea placeholder="" class="aer-input aer-content" id="txt-comment" formControlName="content"></textarea>
                        </div>
                        <div fxFlex="25" fxFlex.sm="25" fxFlex.xs="100">
                            <div class="form-group">
                                <label for="full_name">B3. Họ và tên của bạn (*)</label>
                                <input type="text" class="form-control aer-input full-name" formControlName="fullName" id="full_name" placeholder="">
                            </div>
                        </div>
                        <div fxFlex="25" fxFlex.sm="25" fxFlex.xs="100">
                            <div class="form-group">
                                <label for="phone">B4. Số điện thoại</label>
                                <input type="text" id="phone" class="form-control aer-input phone" formControlName="phone" placeholder="">
                            </div>
                        </div>
                        <div fxFlex="100" fxFlex.sm="100" fxFlex.xs="100">
                            <div>
                                <label>B5. Thêm hình sản phẩm nếu có (Tối đa 5 hình):
                                </label>
                                <input type="file" id="aer-files" multiple="" accept="image/png, image/jpeg" formControlName="aerFiles">
                            </div>
                            <div id="list-image-upload"></div>
                        </div>
                        <div fxFlex="25" fxFlex.sm="25" fxFlex.xs="100">
                            <button class="btn btn-sm btn-danger" id="btn-send"  type="submit" [disabled]="reviewForm.invalid">Gửi đánh giá</button>
                        </div>
                    </div>
                </form>
                <div class="filter-review">
                    <label><small>Chọn xem đánh giá</small></label>
                    <select id="ddr-image">
                        <option value="">Tất cả</option>
                        <option value="1">Có ảnh</option>
                        <option value="2">Không có ảnh</option>
                    </select>
                    <select id="ddr-star">
                        <option value="">Tất cả ★</option>
                        <option value="5">Có 5 ★</option>
                        <option value="4">Có 4 ★</option>
                        <option value="3">Có 3 ★</option>
                        <option value="2">Có 2 ★</option>
                        <option value="1">Có 1 ★</option>
                    </select>
                </div>
                <div class="list-review">
                    <div class="alert alert-warning" role="alert">Chưa có đánh giá</div>
                </div>


            </div>

            <div fxFlex="25" fxHide.sm fxHide.xs >
                <div class="module_service_details">
                    <div class="wrap_module_service">
                        <div class="item_service">
                            <div class="wrap_item">
                                <div class="content_service" *ngFor="let service of service_details">
                                    <img src="{{service.urlImg}}" alt="">
                                    <p>{{service.name}}</p>
                                    <span>{{service.detail}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <app-recommended-products></app-recommended-products>
            </div>

            <div fxFlex="100" fxFlex.sm="100" fxFlex.xs="100">
                <app-related-products [category]="product.category"></app-related-products>

                <app-viewed-products></app-viewed-products>
            </div>

        </div>

    </div>
</div>